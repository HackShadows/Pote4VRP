<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>VRP résolveur</title>
	<link href="static/css/style.css" rel="stylesheet">
	<script type="text/javascript" src="script.js"></script>
</head>
<body>



	<header>
		<h1>Vehicule Routing Problem</h1>
		<button id="bouton-aide" onclick="showHelp()">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
				<path fill="currentColor" d="M8 0c4.42 0 8 3.58 8 8s-3.58 8-8 8s-8-3.58-8-8s3.58-8 8-8m0 1C4.13 1 1 4.13 1 8s3.13 7 7 7s7-3.13 7-7s-3.13-7-7-7m0 10.2a.75.75 0 1 1 0 1.5a.75.75 0 0 1 0-1.5m0-8.25a2.5 2.5 0 0 1 2.5 2.5c0 .523-.167.923-.423 1.24a3 3 0 0 1-.624.561l-.167.117c-.262.182-.451.317-.586.483a.88.88 0 0 0-.2.598v1a.5.5 0 0 1-1 0v-1c0-.519.168-.916.425-1.23c.185-.226.413-.404.616-.55l.173-.12c.26-.182.449-.318.584-.486A.9.9 0 0 0 9.5 5.45a1.5 1.5 0 0 0-3 0a.5.5 0 0 1-1 0A2.5 2.5 0 0 1 8 2.95"/>
			</svg>
		</button>
	</header>





	<main>


		<template id="fichier-selectionne">
			<style>
			* { box-sizing: border-box; }
			.container {
				display: flex;
				flex-flow: row nowrap;
				justify-content: space-between;
				align-items: center;
				width: 100%;
				padding: .8em 1.5em;
				background-color: #FFF8F8;
			}
			div > div {
				display: flex;
				flex-flow: row nowrap;
				justify-content: space-between;
				align-items: center;
				width: 50%;
			}
			slot:nth-child(2) {
				font-size: .9em;
				color: #344;
				margin-left: auto;
			}
			button {
				padding: 0;
				border: none;
				margin: 0;
				background-color: transparent;
				color: black;
			}
			button:hover {
				color: red;
			}
			svg {
				width: 24px;
				height: 24px;
			}
			</style>
			<div class="container">
				<div><slot name="filename">Nom-du-fichier.vrp</slot>
				<slot name="filesize">xxx.xx KB</slot></div>
				<button>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
						<circle cx="12" cy="12" r="10"/>
						<line x1="15" y1="9" x2="9" y2="15"/>
						<line x1="9" y1="9" x2="15" y2="15"/>
					</svg>
				</button>
			</div>
		</template>



		<form id="formulaire" action="process" method="POST">
			<p id="form-titre">Sélectionnez les ensembles de données à optimiser :</p>
			<label id="form-ajouter-fichier">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
					<path fill="currentColor" d="M3 1h12.414L21 6.586V12h-2V9h-6V3H5v18h7v2H3V1Zm12 2.414V7h3.586L15 3.414ZM20 14v4h4v2h-4v4h-2v-4h-4v-2h4v-4h2Z"/>
				</svg>
				<span>Choisissez vos fichiers</span>
				<input id="choix-fichiers" type="file" accept=".vrp">
			</label>
			<div id="form-text-drag-and-drop">
				<p>ou glissez-déposez ici</p>
				<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 512 512">
					<path fill="currentColor" fill-rule="evenodd" d="M277.333 128H320V42.667H42.667V320H128v-42.667H85.333v-192h192zM192 181.333h-10.667V192h-32v-42.667H192zm-42.667 53.334v42.666h32v-42.666zm0 128V320h32v42.667zM416 320v42.667h32V320zm32-42.667h-32v-42.666h32zm-170.667-128h-42.666v32h42.666zm42.667 0h42.667v32H320zM277.333 448v-32h-42.666v32zM320 416h42.667v32H320zm-138.667 0v-10.667h-32V448H192v-32zM416 181.333V192h32v-42.667h-42.667v32zM416 416h-10.667v32H448v-42.667h-32zm-74.225-181.333L298.667 192L256 234.667zm-43.108 170.666L256 362.667h85.775zm-64-149.333L192 298.667l42.667 42.666zm170.666 42.667l-42.666 42.666V256z" clip-rule="evenodd"/>
				</svg>
			</div>
			<ol id="form-fichier-liste">
			</ol>
			<div id="form-soumettre" class="hidden">
				<span>Aucun fichier ajouté</span>
				<label>
					<span>Optimiser</span>
					<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15">
						<path fill="currentColor" d="M8.293 2.293a1 1 0 0 1 1.414 0l4.5 4.5a1 1 0 0 1 0 1.414l-4.5 4.5a1 1 0 0 1-1.414-1.414L11 8.5H1.5a1 1 0 0 1 0-2H11L8.293 3.707a1 1 0 0 1 0-1.414Z"/>
					</svg>
					<input type="submit">
				</label>
			</div>
		</form>


	</main>



	<div id="page-aide" class="hidden"><div>
		<button onclick="hideHelp()">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
				<path fill="none" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.5" d="m7.757 16.243l8.486-8.486m0 8.486L7.757 7.757M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2s10 4.477 10 10"/>
			</svg>
		</button>


		<h1>A quoi sert cette app ?</h1>
		<p>
			[Explication longue et bien]
		</p>
	</div></div>





	<script type="text/javascript">
		const helpPage  = document.getElementById("page-aide");
		const fileInput = document.getElementById("choix-fichiers");
		fileInput.addEventListener("change", handleFileSelect);
		const form               = document.getElementById("formulaire");
		const formTitre          = document.getElementById("form-titre");
		const formAjouter        = document.getElementById("form-ajouter-fichier");
		const formDrop           = document.getElementById("form-text-drag-and-drop");
		const formFichierListe   = document.getElementById("form-fichier-liste");
		const formSoumettre      = document.getElementById("form-soumettre");
		const formChooseFileText = document.querySelector("#form-ajouter-fichier span");
		const formNbFichiers     = document.querySelector("#form-soumettre span");

		document.querySelector("#form-soumettre input[type=\"submit\"]").addEventListener("click", (event) => {
			event.preventDefault(); // Prevent the default form submission

			// Create a new FormData object
			const formData = new FormData();

			// Add each file in the file_list to the FormData object
			for(let i = 0; i < selectedFiles.length; i++) {
				formData.append(`file_${i}`, selectedFiles[i]);
			}

			// Send the FormData object using fetch() or XMLHttpRequest()
			fetch(form.action.split('/').pop(), {
				method: 'POST',
				body: formData
			})
			.then(response => {
				// Handle the response from the server
				console.log(response);
			})
			.catch(error => {
				// Handle any errors
				console.error(error);
			});
		});
	</script>



</body>
</html>
